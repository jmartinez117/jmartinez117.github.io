<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jesús R. Martínez Urrutia — NixOS Desktop • Portfolio</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg1:#0d1220; --bg2:#0a1a2f;
      --ink:#e7ecff; --muted:#b8c3e6; --line:#233053;
      --panel:#0f1d38; --win:#121f3b;
      --accent:#5277C3; --accent-2:#7EBAE4;
      --ok:#14b8a6; --warn:#f59e0b; --bad:#ef4444;
      --shadow:0 18px 50px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font:16px/1.5 system-ui, Segoe UI, Roboto, Ubuntu, Arial;
      color:var(--ink);
      background:linear-gradient(120deg,var(--bg1),var(--bg2));
      overflow:hidden}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .hidden{display:none !important}

    /* Top bar */
    .topbar{position:fixed;inset:0 0 auto 0;height:46px;
      display:flex;align-items:center;gap:12px;padding:0 12px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg,rgba(0,0,0,.25),transparent);
      backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);z-index:1000}
    .nixlogo{display:inline-flex;align-items:center;gap:10px;padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.28);border:1px solid var(--line)}
    .nixlogo img{height:22px;width:auto;display:block}
    .title{font-weight:600}
    .spacer{flex:1}
    .status{display:flex;gap:10px;color:var(--muted);font-size:14px}

    /* Login */
    .login{position:fixed;inset:0;display:grid;place-items:center;z-index:1500;
      background:linear-gradient(160deg,#08101f,#0b1830)}
    .loginbox{width:min(520px,92vw);padding:22px;border-radius:16px;
      background:linear-gradient(180deg,rgba(255,255,255,.04),transparent),#0f1d38;
      border:1px solid var(--line);box-shadow:var(--shadow)}
    .loginbox h1{margin:0 0 6px 0;font-size:22px}
    .input{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#0b142b;color:var(--ink)}
    #login-error{color:#ff7373;font-size:12px;height:14px;opacity:.95;margin-top:6px}

    /* Dock */
    .dock{position:fixed;inset:auto 12px 58px auto;display:grid;gap:6px 12px;grid-auto-flow:row;justify-items:center}
    .icon{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#0f1d38,#0d1730);border:1px solid var(--line);display:grid;place-items:center;box-shadow:var(--shadow);cursor:pointer;transition:transform .12s ease}
    .icon:hover{transform:translateY(-2px)}
    .label{font-size:12px;color:var(--muted);margin-top:0}

    /* Windows */
    .win{position:absolute;top:86px;left:6vw;width:84vw;max-height:70vh;
      display:grid;grid-template-rows:auto 1fr;background:var(--win);
      border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    .titlebar{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid var(--line);
      background:linear-gradient(180deg,rgba(255,255,255,.05),transparent);user-select:none;touch-action:none;cursor:move}
    .tb-title{font-weight:600}
    .tb-actions{margin-left:auto;display:flex;gap:8px}
    button.btn{width:14px;height:14px;border-radius:999px;border:1px solid var(--line);cursor:pointer;background:transparent;padding:0}
    button.btn.close{background:var(--bad)} button.btn.min{background:var(--warn)} button.btn.max{background:var(--ok)}
    .content{padding:16px;overflow:auto}
    .terminal{background:#0a0f1e;border:1px solid #1b2442;border-radius:12px;padding:12px 14px;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;font-size:14px;color:#cfe0ff}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),transparent),#0f1d38;border:1px solid var(--line);border-radius:14px;padding:16px}
    .taskbar{position:fixed;inset:auto 0 0 0;height:52px;display:flex;align-items:center;gap:10px;padding:0 10px;background:linear-gradient(0deg,rgba(0,0,0,.2),transparent);border-top:1px solid var(--line);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
    .taskbtn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;background:rgba(0,0,0,.18);border:1px solid var(--line);color:var(--ink);cursor:pointer;max-width:220px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    @media (max-width:900px){ .win{left:5vw;width:90vw} }
    @media (max-width:700px){
      .dock{inset:auto 50% 64px auto;transform:translateX(50%);grid-auto-flow:column}
      .label{display:none}
      .icon{width:52px;height:52px}
      .win{top:70px;left:2vw;width:96vw;max-height:calc(100vh - 120px)}
    }
  </style>
</head>
<body>
  <!-- LOGIN -->
  <section id="login" class="login" aria-label="Login">
    <div class="loginbox" role="dialog" aria-modal="true" aria-labelledby="login-title">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
        <img alt="NixOS logo" src="https://brand.nixos.org/logos/nixos-logomark-default-gradient-recommended.svg" height="32" width="32">
        <h1 id="login-title" style="margin:0">NixOS — Session</h1>
      </div>
      <p style="color:var(--muted);margin-top:0">Enter the passphrase to open the desktop experience.</p>
      <input id="pw" class="input" type="password" placeholder="Password" autocomplete="current-password">
      <div id="login-error" role="alert" aria-live="polite"></div>
      <div style="display:flex;gap:10px;margin-top:12px">
        <button id="enter" type="button" class="input" style="cursor:pointer;background:linear-gradient(135deg,var(--accent),var(--accent-2));border:1px solid var(--line)">Enter</button>
      </div>
      <p style="color:var(--muted);font-size:12px;margin-top:10px">Privacy note: static site — no data leaves your browser.</p>
    </div>
  </section>

  <!-- DESKTOP -->
  <div id="desktop" class="hidden" aria-live="polite">
    <div class="topbar" role="banner">
      <div class="nixlogo" title="NixOS" aria-label="NixOS">
        <img alt="NixOS logo" src="https://brand.nixos.org/logos/nixos-logomark-default-gradient-recommended.svg">
        <span class="title">NixOS Desktop</span>
      </div>
      <div class="spacer"></div>
      <div class="status"><span>jesus@nixos</span><span aria-hidden="true">•</span><span id="clock"></span></div>
    </div>

    <!-- Dock -->
    <div class="dock" aria-label="App Dock">
      <div class="icon" data-open="#win-about" role="button" tabindex="0" title="About"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg></div><div class="label">About</div>
      <div class="icon" data-open="#win-resume" role="button" tabindex="0" title="Resume"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16l6-3 6 3V8z"/></svg></div><div class="label">Resume</div>
      <div class="icon" data-open="#win-projects" role="button" tabindex="0" title="Projects"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M3 7h18M3 12h18M3 17h18"/></svg></div><div class="label">Projects</div>
      <div class="icon" data-open="#win-terminal" role="button" tabindex="0" title="Terminal"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M8 9l3 3-3 3M13 15h3"/></svg></div><div class="label">Terminal</div>
      <div class="icon" data-open="#win-settings" role="button" tabindex="0" title="Settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg></div><div class="label">Settings</div>
      <div class="icon" data-open="#win-contact" role="button" tabindex="0" title="Contact"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M4 4h16v12H5.17L4 17.17V4z"/><path d="m22 6-10 7L2 6"/></svg></div><div class="label">Contact</div>
    </div>

    <!-- Windows -->
    <section class="win" id="win-about" role="dialog" aria-label="About">
      <div class="titlebar">
        <span class="tb-title">About</span>
        <div class="tb-actions">
          <button class="btn min" data-min="#win-about" aria-label="Minimize"></button>
          <button class="btn max" data-max="#win-about" aria-label="Maximize"></button>
          <button class="btn close" data-close="#win-about" aria-label="Close"></button>
        </div>
      </div>
      <div class="content">
        <div class="terminal" role="region" aria-label="neofetch output"><pre id="neofetch"></pre></div>
        <p style="color:var(--muted);margin-top:12px">
          Hi! I’m Jesús — a Security+ certified, hands-on IT professional moving deeper into security.
          I enjoy troubleshooting complex connectivity issues, reading firewall and endpoint logs,
          and automating repetitive triage with Python. I’m actively seeking an IT role — ideally as a
          <strong>Technical Support Engineer</strong> or <strong>SOC/Cybersecurity Analyst (Tier-1)</strong> — where I can combine support discipline with security operations and grow my detection & response skills.
        </p>
      </div>
    </section>

    <section class="win hidden" id="win-resume" role="dialog" aria-label="Resume">
      <div class="titlebar">
        <span class="tb-title">Resume</span>
        <div class="tb-actions">
          <button class="btn min" data-min="#win-resume" aria-label="Minimize"></button>
          <button class="btn max" data-max="#win-resume" aria-label="Maximize"></button>
          <button class="btn close" data-close="#win-resume" aria-label="Close"></button>
        </div>
      </div>
      <div class="content">
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px">
          <a class="taskbtn" href="resume.pdf" target="_blank" rel="noopener">Open PDF (new tab)</a>
        </div>
        <h3>Experience</h3>
        <div class="card">
          <strong>Technical Support Engineer (Level 1 → Security-Aware Tier 2) — ONESUPPORT</strong>
          <div class="muted">May 2023 – Present · Mexico City (remote), US-based ISP</div>
          <ul>
            <li>Resolve ~30 connectivity, OS and SaaS tickets/day; SLA &gt;95%.</li>
            <li>Review FortiGate logs; open ~10 follow-up SOC cases/month.</li>
            <li>Weekly Nessus Essentials scans on ~50 endpoints; report critical CVEs.</li>
            <li>Python + VirusTotal automation saves ~10 min per malware ticket.</li>
            <li>Assist with firewall rule changes; authored 25 KB articles.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="win hidden" id="win-projects" role="dialog" aria-label="Projects">
      <div class="titlebar">
        <span class="tb-title">Projects</span>
        <div class="tb-actions">
          <button class="btn min" data-min="#win-projects" aria-label="Minimize"></button>
          <button class="btn max" data-max="#win-projects" aria-label="Maximize"></button>
          <button class="btn close" data-close="#win-projects" aria-label="Close"></button>
        </div>
      </div>
      <div class="content">
        <div class="grid">
          <div class="card">
            <h4>cloudflare-lab</h4>
            <p class="muted">Cloudflare Pages lab — deployment/test project.</p>
            <p><a href="https://cloudflare-lab-81v.pages.dev/" target="_blank" rel="noopener">Open project</a></p>
          </div>
          <div class="card">
            <h4>vt_batch</h4>
            <p class="muted">Python tool to hash files and bulk-query VirusTotal for faster malware triage.</p>
            <a href="https://github.com/jmartinez117/vt_batch" target="_blank" rel="noopener">Source</a>
          </div>
          <div class="card">
            <h4>log_pulse</h4>
            <p class="muted">Mini log viewer parsing common firewall formats for quick IOC scanning.</p>
            <a href="https://github.com/jmartinez117/log_pulse" target="_blank" rel="noopener">Source</a>
          </div>
        </div>
      </div>
    </section>

    <section class="win hidden" id="win-terminal" role="dialog" aria-label="Terminal">
      <div class="titlebar">
        <span class="tb-title">Terminal</span>
        <div class="tb-actions">
          <button class="btn min" data-min="#win-terminal" aria-label="Minimize"></button>
          <button class="btn max" data-max="#win-terminal" aria-label="Maximize"></button>
          <button class="btn close" data-close="#win-terminal" aria-label="Close"></button>
        </div>
      </div>
      <div class="content">
        <div class="terminal" style="height:48vh;overflow:auto" id="term-out"></div>
        <input id="term-in" class="input" placeholder="Type a command (try 'help')" />
      </div>
    </section>

    <section class="win hidden" id="win-settings" role="dialog" aria-label="Settings">
      <div class="titlebar">
        <span class="tb-title">Settings</span>
        <div class="tb-actions">
          <button class="btn min" data-min="#win-settings" aria-label="Minimize"></button>
          <button class="btn max" data-max="#win-settings" aria-label="Maximize"></button>
          <button class="btn close" data-close="#win-settings" aria-label="Close"></button>
        </div>
      </div>
      <div class="content">
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px">
          <div class="card">
            <h4>Display</h4>
            <label>Brightness: <input id="range-brightness" type="range" min="50" max="130" value="100"></label><br/>
            <label>Contrast: <input id="range-contrast" type="range" min="70" max="130" value="100"></label>
            <p class="muted">Adjusts the whole interface in real-time. Saved locally.</p>
          </div>
          <div class="card">
            <h4>Accent theme</h4>
            <label style="display:block;margin-bottom:6px"><input type="radio" name="accent" value="nixos" checked> NixOS (blue)</label>
            <label style="display:block;margin-bottom:6px"><input type="radio" name="accent" value="ubuntu"> Ubuntu (orange)</label>
            <label style="display:block;"><input type="radio" name="accent" value="kali"> Kali (cyan)</label>
          </div>
          <div class="card">
            <h4>Clock</h4>
            <label><input id="toggle-24" type="checkbox"> 24-hour time</label>
          </div>
        </div>
      </div>
    </section>

    <div class="taskbar" aria-label="Taskbar">
      <div id="tasks" style="display:flex;gap:8px;flex-wrap:wrap"></div>
      <div class="spacer"></div>
      <div class="muted" style="padding-right:10px">© <span id="year"></span> Jesús R. Martínez Urrutia</div>
    </div>
  </div>

  <script>
  // ----- Config -----
  const PASSWORD = "CHANGE_ME"; // <-- put your real passphrase here (case-sensitive)
  const tz = "America/Mexico_City";

  // ----- Helpers -----
  const qs=(s,e=document)=>e.querySelector(s), qsa=(s,e=document)=>Array.from(e.querySelectorAll(s));
  function bring(el){ el.style.zIndex = String((bring.z = (bring.z||10)+1)); }
  function keepInView(win){
    const r = win.getBoundingClientRect(), pad=8;
    const maxL = innerWidth - r.width - pad, maxT = innerHeight - r.height - 72;
    win.style.left = Math.max(pad, Math.min(r.left, Math.max(pad, maxL))) + "px";
    win.style.top  = Math.max(54,  Math.min(r.top,  Math.max(54,  maxT))) + "px";
  }

  // ----- Clock -----
  function updateClock(){
    const d=new Date();
    const use24 = localStorage.getItem("clock24")==="1";
    const fmt = new Intl.DateTimeFormat("en-US",{timeZone:tz,hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"2-digit",hour12:!use24});
    const el=qs("#clock"); if (el) el.textContent = fmt.format(d) + " (Mexico City)";
    const y=qs("#year"); if (y) y.textContent = String(d.getFullYear());
  }
  setInterval(updateClock,1000); updateClock();

  // ----- Login (always required; no persistence) -----
  const login=qs("#login"), desktop=qs("#desktop");
  const pw=qs("#pw"), btn=qs("#enter"), err=qs("#login-error");
  function unlock(){ login.classList.add("hidden"); desktop.classList.remove("hidden"); }
  function tryUnlock(){
    const val=(pw.value||"").trim();
    if(!val){ err.textContent="Enter the password."; pw.focus(); return; }
    if(val===PASSWORD){ err.textContent=""; unlock(); pw.value=""; scrollTo({top:0}); }
    else{ err.textContent="Incorrect password."; document.querySelector(".loginbox")?.animate([{transform:"translateX(0)"},{transform:"translateX(-6px)"},{transform:"translateX(6px)"},{transform:"translateX(0)"}],{duration:250}); pw.select(); }
  }
  btn.addEventListener("click", tryUnlock);
  pw.addEventListener("keydown", e=>{ if(e.key==="Enter") tryUnlock(); });

  // ----- Window manager -----
  function makeDraggable(win){
    const bar=qs(".titlebar",win); if(!bar) return;
    let sx=0,sy=0,ox=0,oy=0,drag=false;
    bar.style.touchAction="none";
    function isControlTarget(ev){ const t=ev.target; return t.classList.contains("btn") || t.closest(".tb-actions"); }
    function down(e){ if(isControlTarget(e)) return; drag=true; bring(win); const p=("clientX" in e)?e:(e.touches?e.touches[0]:null); if(!p) return; sx=p.clientX; sy=p.clientY; const r=win.getBoundingClientRect(); ox=r.left; oy=r.top; }
    function move(e){ if(!drag) return; const p=("clientX" in e)?e:(e.touches?e.touches[0]:null); if(!p) return; win.style.left=(ox+p.clientX-sx)+"px"; win.style.top=(oy+p.clientY-sy)+"px"; }
    function up(){ if(!drag) return; drag=false; keepInView(win); }
    if(window.PointerEvent){ bar.addEventListener("pointerdown",down); addEventListener("pointermove",move); addEventListener("pointerup",up); }
    else{ bar.addEventListener("mousedown",down); addEventListener("mousemove",move); addEventListener("mouseup",up); bar.addEventListener("touchstart",down,{passive:true}); addEventListener("touchmove",move,{passive:false}); addEventListener("touchend",up); }
    win.addEventListener("mousedown",()=>bring(win));
  }
  qsa(".win").forEach(makeDraggable);

  function show(sel){ const w=qs(sel); if(!w) return; w.classList.remove("hidden"); bring(w); if (innerWidth<700){ maximize(sel); } }
  function hide(sel){ qs(sel)?.classList.add("hidden"); }
  function minimize(sel){
    hide(sel);
    const w=qs(sel); if(!w) return;
    const t=qs(".tb-title",w)?.textContent||"Window";
    const b=document.createElement("button"); b.className="taskbtn"; b.textContent=t;
    b.onclick=()=>{ show(sel); b.remove(); };
    qs("#tasks").appendChild(b);
  }
  function maximize(sel){
    const w=qs(sel); if(!w) return;
    if(w.dataset.maxed==="1"){ w.style.left="6vw"; w.style.top="86px"; w.style.width="84vw"; w.style.height="70vh"; w.dataset.maxed="0"; }
    else{ w.style.left="2vw"; w.style.top="54px"; w.style.width="96vw"; w.style.height="calc(100vh - 110px)"; w.dataset.maxed="1"; }
    bring(w);
  }
  function closew(sel){ hide(sel); }

  qsa("[data-open]").forEach(i=>{
    i.addEventListener("click",()=>{ const sel=i.getAttribute("data-open"); const w=qs(sel); if (w && w.classList.contains("hidden")) show(sel); else if (w) bring(w); });
    i.addEventListener("keydown",e=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); i.click(); }});
  });
  qsa("[data-min]").forEach(b=> b.addEventListener("click", ()=> minimize(b.getAttribute("data-min")) ));
  qsa("[data-max]").forEach(b=> b.addEventListener("click", ()=> maximize(b.getAttribute("data-max")) ));
  qsa("[data-close]").forEach(b=> b.addEventListener("click", ()=> closew(b.getAttribute("data-close")) ));
  addEventListener("resize", ()=> qsa(".win:not(.hidden)").forEach(keepInView));

  // ----- About “neofetch” -----
  function updateNeofetch(){
    const res = `${innerWidth}x${innerHeight}`;
    const lines = [
      'jesus@nixos','---------------------------',
      'OS: NixOS 24.05 (Uakari)','Host: Web Portfolio (CanvasWM)','Kernel: HTML5 1.0 (JS Engine)',
      `Resolution: ${res}`,'Theme: Nix — accent blue','Packages: 0 (nix, simulated)',
      'Shell: pseudo-shell (safe)','Terminal: browser console (safe)','CPU: Focus x1','GPU: Imagination x∞','Memory: Plenty (client-side)'
    ];
    const nf=qs('#neofetch'); if(nf) nf.textContent = lines.join('\\n');
  }
  addEventListener("resize", updateNeofetch); updateNeofetch();

  // ----- Terminal -----
  const out=qs("#term-out"), tin=qs("#term-in");
  function println(s){ if(!out) return; out.textContent+=(s??'')+((s??'')===''?'':'\\n'); out.scrollTop=out.scrollHeight; }
  function printlnHTML(html){ if(!out) return; const div=document.createElement("div"); div.innerHTML=html; out.appendChild(div); out.appendChild(document.createTextNode("\\n")); out.scrollTop=out.scrollHeight; }
  if (out && tin){
    const cmds={
      help:()=> "Commands: help, whoami, date, projects, clear",
      whoami:()=> "jesus@nixos",
      date:()=> new Intl.DateTimeFormat("en-US",{ timeZone:tz, dateStyle:"full", timeStyle:"long", hour12:true }).format(new Date()),
      projects:()=> { printlnHTML('<ul style=\"margin:6px 0 0 18px\">'
        + '<li><a href=\"https://github.com/jmartinez117/vt_batch\" target=\"_blank\" rel=\"noopener\">vt_batch</a> — Python + VirusTotal</li>'
        + '<li><a href=\"https://github.com/jmartinez117/log_pulse\" target=\"_blank\" rel=\"noopener\">log_pulse</a> — Log parser</li>'
        + '<li><a href=\"https://cloudflare-lab-81v.pages.dev/\" target=\"_blank\" rel=\"noopener\">cloudflare-lab</a> — Cloudflare Pages lab</li>'
        + '</ul>'); return ''; },
      clear:()=> { out.textContent=''; return ''; }
    };
    println("Type 'help' to see commands.");
    tin.addEventListener("keydown", e=>{
      if(e.key==="Enter"){
        const c=tin.value.trim();
        println('> ' + c);
        if (c in cmds){ const r = cmds[c](); if (r) println(r); }
        else if (c.length){ println("Unknown command. Type 'help'."); }
        tin.value='';
      }
    });
  }
  </script>
</body>
</html>
